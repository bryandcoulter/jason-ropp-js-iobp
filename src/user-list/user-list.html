<link rel="import" href="polymer.html">
<link rel="import" href="user-component.html">
<dom-module id="user-list">
  <template>
    <style>
      :host {
        display: block;
        padding: 10px;
      }

      .default-card {
        background-color: #B1A296;
        width: 300px;
        padding: 10px;
        margin: 10px;
        border-radius: 5px;
        box-shadow: 3px 3px 2px black;
        height: 50px;
      }

      .default-card:hover {
        height: 230px;
        transition: height .4s ease-out;
      }

      .default-card:not(:hover) {
        height: 50px;
        transition: height .4s ease-in;
      }

      .default-card:hover>h3 {
        opacity: 1;
        transition: opacity 1.4s;
      }

      hgroup>h3 {
        opacity: 0;
      }

      button {
        background-color: #7395AE;
        color: black;
        border: none;
      }
    </style>
    <template is="dom-if" if="[[!userToDisplay]]">
      <h2>There are currently no users in our system.</h2>
    </template>

    <template is="dom-if" if="[[userToDisplay]]">
      <p>Click the user card to toggle detals</p>
      <template is="dom-repeat" items="[[users]]" as="user">
        <user-component collapsed="true" mode="display" user="[[user]]">
        </user-component>
      </template>
    </template>
  </template>
  <script>
    'use strict';
    class UserList extends Polymer.Element {
      static get is() { return 'user-list'; }
      static get properties() {
        return {
          users: {
            type: Array,
          },
          selectedUser: {
            type: Object
          },
          userToDisplay: {
            type: Boolean,
            value: true
          }
        };
      }
      ready() {
        super.ready();

      }
      connectedCallback() {
        super.connectedCallback();
        this.set('users', JSON.parse(localStorage.getItem('onboardProjectUsers')));

        if (!this.users[0]) {
          this.set('userToDisplay', false);
        }
      }
      selectUserCard() {
        history.pushState({}, 'User Profile', 'user-profile.html');
      }
    }

    customElements.define(UserList.is, UserList);
  </script>
</dom-module>
